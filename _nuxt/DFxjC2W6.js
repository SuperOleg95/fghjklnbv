import{ar as w,a3 as _,br as C,an as d,r as E,aM as y,M as z,d as m,bs as A,bt as M}from"./DmFLKH_o.js";function T(n,u,s){let c;_(s)?c={evaluating:s}:c={};const{lazy:o=!1,evaluating:r=void 0,shallow:i=!0,onError:a=C}=c,e=d(!o),t=i?d(u):E(u);let l=0;return y(async g=>{if(!e.value)return;l++;const p=l;let h=!1;r&&Promise.resolve().then(()=>{r.value=!0});try{const v=await n(b=>{g(()=>{r&&(r.value=!1),h||b()})});p===l&&(t.value=v)}catch(v){a(v)}finally{r&&p===l&&(r.value=!1),h=!0}}),o?z(()=>(e.value=!0,t.value)):t}function x(n={}){const{inheritAttrs:u=!0}=n,s=d(),c=m({setup(r,{slots:i}){return()=>{s.value=i.default}}}),o=m({inheritAttrs:u,props:n.props,setup(r,{attrs:i,slots:a}){return()=>{var e;s.value;const t=(e=s.value)==null?void 0:e.call(s,{...n.props==null?B(i):r,$slots:a});return u&&(t==null?void 0:t.length)===1?t[0]:t}}});return A({define:c,reuse:o},[c,o])}function B(n){const u={};for(const s in n)u[M(s)]=n[s];return u}const f=new Map;function D(n){const u=w();function s(a){var e;const t=f.get(n)||new Set;t.add(a),f.set(n,t);const l=()=>o(a);return(e=u==null?void 0:u.cleanups)==null||e.push(l),l}function c(a){function e(...t){o(e),a(...t)}return s(e)}function o(a){const e=f.get(n);e&&(e.delete(a),e.size||r())}function r(){f.delete(n)}function i(a,e){var t;(t=f.get(n))==null||t.forEach(l=>l(a,e))}return{on:s,once:c,off:o,emit:i,reset:r}}export{T as a,x as c,D as u};
