import{as as _,a4 as C,aC as E,ao as d,r as b,aD as y,M as z,d as m,aE as A,aF as B}from"./C-4U8D4B.js";function M(n,u,s){let c;C(s)?c={evaluating:s}:c={};const{lazy:o=!1,evaluating:a=void 0,shallow:i=!0,onError:r=E}=c,e=d(!o),t=i?d(u):b(u);let l=0;return y(async g=>{if(!e.value)return;l++;const p=l;let h=!1;a&&Promise.resolve().then(()=>{a.value=!0});try{const v=await n(w=>{g(()=>{a&&(a.value=!1),h||w()})});p===l&&(t.value=v)}catch(v){r(v)}finally{a&&p===l&&(a.value=!1),h=!0}}),o?z(()=>(e.value=!0,t.value)):t}function R(n={}){const{inheritAttrs:u=!0}=n,s=d(),c=m({setup(a,{slots:i}){return()=>{s.value=i.default}}}),o=m({inheritAttrs:u,props:n.props,setup(a,{attrs:i,slots:r}){return()=>{var e;s.value;const t=(e=s.value)==null?void 0:e.call(s,{...n.props==null?D(i):a,$slots:r});return u&&(t==null?void 0:t.length)===1?t[0]:t}}});return A({define:c,reuse:o},[c,o])}function D(n){const u={};for(const s in n)u[B(s)]=n[s];return u}const f=new Map;function T(n){const u=_();function s(r){var e;const t=f.get(n)||new Set;t.add(r),f.set(n,t);const l=()=>o(r);return(e=u==null?void 0:u.cleanups)==null||e.push(l),l}function c(r){function e(...t){o(e),r(...t)}return s(e)}function o(r){const e=f.get(n);e&&(e.delete(r),e.size||a())}function a(){f.delete(n)}function i(r,e){var t;(t=f.get(n))==null||t.forEach(l=>l(r,e))}return{on:s,once:c,off:o,emit:i,reset:a}}export{R as a,M as c,T as u};
